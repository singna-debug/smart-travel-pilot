
# 🔑 카카오톡 채널 연동 API 키 발급 가이드

Smart Travel Pilot 챗봇 연동에 필요한 API 키를 발급받는 방법입니다.

> 📢 **권한 확인 필수**:
> 카카오톡 채널 생성을 직접 하지 않았더라도, 해당 채널의 **관리자(Manager)** 권한을 가지고 있다면 봇 연결이 가능합니다.
> (단순 '매니저'가 아닌 '채널 마스터' 권한이 필요한 경우도 있으니, 권한이 부족하면 채널 소유자에게 **관리자 초대**를 요청하세요.)

---

## 1. REST API 키 & ADMIN 키 (필수)
**[Kakao Developers](https://developers.kakao.com/)**에서 발급받습니다.

1. **로그인 및 애플리케이션 생성**:
   - `내 애플리케이션` -> `애플리케이션 추가하기` -> 앱 이름(예: Smart Travel Pilot) 입력
2. **앱 키 확인**:
   - 생성된 앱 클릭 -> 좌측 메뉴 `앱 키` 선택
   - **`REST API 키`**: `KAKAO_REST_API_KEY`에 입력
   - **`Admin 키`**: `KAKAO_ADMIN_KEY`에 입력 (⚠️ 절대 노출 금지)

## 2. 채널 ID (검색용 아이디)
**[카카오톡 채널 관리자센터](https://center-pf.kakao.com/)**에서 확인합니다.

1. **채널 생성**:
   - `새 채널 만들기` -> 채널 이름 및 검색용 아이디 입력
2. **검색용 아이디 확인**:
   - 대시보드 좌측 상단 프로필 아래 **`@아이디`** 확인
   - 예: `@smarttravel` -> `KAKAO_CHANNEL_ID`에 입력

## 3. 스킬 서버 URL 등록 (필수)
단순 API 키만으로는 챗봇이 동작하지 않습니다. **[카카오 i 오픈빌더](https://i.kakao.com/)**에 서버를 등록해야 합니다.

1. **봇 생성**:
   - `내 봇` -> `봇 만들기`
2. **스킬 등록**:
   - 메뉴 `스킬` -> `생성`
   - **URL**: 배포된 서버 주소 + `/api/kakao-skill` 뒤에 붙임
     - 예: `https://your-domain.vercel.app/api/kakao-skill`
   - 스킬 이름 입력 후 저장
3. **블록 연결**:
   - `시나리오` -> `블록 설정` -> `파라미터 설정` 또는 `스킬 선택`에서 등록한 스킬 연결
4. **배포**:
   - 메뉴 `배포` -> `운영 배포`

---

### 💡 로컬 테스트 시 주의사항
- 로컬(`localhost:3000`) 주소는 카카오 서버에서 접근할 수 없습니다.
- `ngrok` 등을 사용하여 로컬 서버를 외부로 노출시키거나, Vercel 등에 배포 후 테스트해야 합니다.
